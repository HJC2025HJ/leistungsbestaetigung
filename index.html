<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Leistungsbestätigung</title>

<style>
/* ===== BASE ===== */
* { box-sizing: border-box; }

body{
margin:0;
padding:16px;
font-family: Arial, Helvetica, sans-serif;
background:#eef2f3;
}

.container{
max-width:1200px;
margin:auto;
background:#fff;
padding:24px;
border-radius:14px;
position:relative;
overflow:hidden;
}

/* ===== WATERMARK ===== */
.watermark{
position:absolute;
inset:0;
background:url("HJ_Clean.png") center / 65% no-repeat;
opacity:0.18;
pointer-events:none;
z-index:0;
}

.content{ position:relative; z-index:1; }

/* ===== HEADER ===== */
.header{
display:flex;
flex-wrap:wrap;
gap:16px;
align-items:center;
border-bottom:2px solid #e5e7eb;
padding-bottom:12px;
}
.logo{ max-width:140px; }
.company{ font-size:14px; line-height:1.4; }

h1{
text-align:center;
margin:20px 0 10px;
}

/* ===== SECTIONS ===== */
.section-title{
margin:24px 0 8px;
font-weight:700;
color:#111;
border-left:4px solid #22c55e;
padding-left:10px;
}

/* ===== GRID SYSTEM ===== */
.form-grid{
display:grid;
gap:16px;
}

.grid-4{ grid-template-columns:repeat(4,1fr); }
.grid-3{ grid-template-columns:repeat(3,1fr); }
.grid-2{ grid-template-columns:repeat(2,1fr); }

@media(max-width:1024px){
.grid-4,.grid-3{ grid-template-columns:repeat(2,1fr); }
}
@media(max-width:640px){
.grid-4,.grid-3,.grid-2{ grid-template-columns:1fr; }
}

/* ===== FIELDS ===== */
.field label{
display:block;
font-size:13px;
font-weight:600;
margin-bottom:4px;
}

input, select{
width:100%;
padding:10px;
border-radius:8px;
border:1px solid #d1d5db;
font-size:14px;
}

/* ===== TIME BLOCK ===== */
.time-group{
display:grid;
grid-template-columns:1fr 1fr;
gap:8px;
}

.time-group small{
display:block;
font-size:12px;
color:#6b7280;
margin-bottom:2px;
}

/* ===== SIGNATURES ===== */
.signatures{
display:grid;
grid-template-columns:1fr 1fr;
gap:24px;
}

@media(max-width:700px){
.signatures{ grid-template-columns:1fr; }
}

.signature-box{
border:1px dashed #9ca3af;
border-radius:10px;
padding:12px;
}

canvas{
width:100%;
height:160px;
border:1px dashed #9ca3af;
border-radius:8px;
touch-action:none;
}

/* ===== BUTTON ===== */
.print-btn{
margin-top:32px;
width:100%;
padding:14px;
font-size:16px;
background:#2563eb;
color:#fff;
border:none;
border-radius:10px;
cursor:pointer;
}

/* ===== PRINT ===== */
@media print{
body{ background:#fff; padding:0; }
.print-btn{ display:none; }
.container{ page-break-inside:avoid; }
}
</style>
</head>

<body>
<div class="container">
<div class="watermark"></div>
<div class="content">

<!-- HEADER -->
<div class="header">
<img src="HJ_Clean.png" class="logo">
<div class="company">
<strong>Cleaning – Marke von HJ Corporate GbR</strong><br>
Stauseestraße 27b, 54317 Riveris<br>
Tel. +49 176 87898900 · info@hjcorporate.de
</div>
</div>

<h1>Leistungsbestätigung</h1>
<div>Nr.: <strong id="docNr"></strong></div>

<!-- MITARBEITER -->
<div class="section-title">Mitarbeiter</div>
<label><input type="checkbox" class="emp"> Hervé Mbarga</label>
<label><input type="checkbox" class="emp"> Jacky Massing</label>

<!-- KUNDE -->
<div class="section-title">Kunde</div>
<div class="form-grid grid-4">
<div class="field"><label>Vorname</label><input></div>
<div class="field"><label>Nachname</label><input></div>
<div class="field"><label>Telefon</label><input></div>
<div class="field"><label>Anschrift</label><input></div>
</div>

<!-- DATE & TIME -->
<div class="section-title">Datum & Zeit</div>
<div class="form-grid grid-3">
<div class="field">
<label>Datum</label>
<input type="date" id="date">
</div>

<div class="field">
<label>Beginn</label>
<small>Stunde / Minute</small>
<div class="time-group">
<select id="sh"></select>
<select id="sm"></select>
</div>
</div>

<div class="field">
<label>Ende</label>
<small>Stunde / Minute</small>
<div class="time-group">
<select id="eh"></select>
<select id="em"></select>
</div>
</div>
</div>

<!-- BERECHNUNG -->
<div class="section-title">Berechnung</div>
<div class="form-grid grid-4">
<div class="field"><label>Anzahl Mitarbeiter</label><input id="empCount" readonly></div>
<div class="field"><label>Arbeitsstunden</label><input id="hours" readonly></div>
<div class="field"><label>€/Stunde</label><input id="rate" type="number"></div>
<div class="field"><label>Kilometer</label><input id="km" type="number"></div>
<div class="field"><label>€/KM</label><input id="kmRate" type="number"></div>
<div class="field"><label>Gesamtbetrag €</label><input id="total" readonly></div>
</div>

<!-- SIGNATURES -->
<div class="section-title">Unterschriften</div>
<div class="signatures">
<div class="signature-box">
<strong>Kunde</strong>
<canvas id="sig1"></canvas>
</div>
<div class="signature-box">
<strong>Mitarbeiter</strong>
<canvas id="sig2"></canvas>
</div>
</div>

<button class="print-btn" onclick="window.print()">Als PDF speichern / drucken</button>

</div>
</div>

<script>
/* DOC NUMBER */
document.getElementById("docNr").innerText =
"LB-" + Date.now();

/* TIME SELECTS */
function fill(sel,max){
for(let i=0;i<=max;i++){
let o=document.createElement("option");
o.value=o.text=String(i).padStart(2,"0");
sel.appendChild(o);
}
}
["sh","eh"].forEach(id=>fill(document.getElementById(id),23));
["sm","em"].forEach(id=>fill(document.getElementById(id),59));

/* CALC */
const emps=document.querySelectorAll(".emp");
function calc(){
let ec=[...emps].filter(e=>e.checked).length;
empCount.value=ec;

let sh=+sh.value, sm=+sm.value;
let eh=+eh.value, em=+em.value;

let h=((eh*60+em)-(sh*60+sm))/60;
if(h<0) h=0;

let totalHours=h*ec;
hours.value=totalHours.toFixed(2);

let total=(totalHours*(+rate.value||0)) + ((+km.value||0)*(+kmRate.value||0));
total.value=total.toFixed(2);
}
document.querySelectorAll("input,select").forEach(e=>e.addEventListener("change",calc));

/* SIGN */
function sign(canvas){
let ctx=canvas.getContext("2d"), d=false;
canvas.addEventListener("pointerdown",()=>d=true);
canvas.addEventListener("pointerup",()=>{d=false;ctx.beginPath()});
canvas.addEventListener("pointermove",e=>{
if(!d) return;
let r=canvas.getBoundingClientRect();
ctx.lineWidth=2;ctx.lineCap="round";
ctx.lineTo(e.clientX-r.left,e.clientY-r.top);
ctx.stroke();ctx.beginPath();
ctx.moveTo(e.clientX-r.left,e.clientY-r.top);
});
}
sign(sig1); sign(sig2);
</script>
</body>
</html>
