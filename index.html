<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LeistungsbestÃ¤tigung</title>

<style>
*{box-sizing:border-box}
body{
font-family:Arial,Helvetica,sans-serif;
background:#f2f4f6;
margin:0;
padding:16px;
}

.container{
max-width:1100px;
margin:auto;
background:#fff;
padding:20px;
border-radius:12px;
position:relative;
}

h1{text-align:center;margin-bottom:20px}

.section-title{
font-weight:bold;
margin:18px 0 8px;
display:flex;
align-items:center;
gap:8px;
}
.section-title::before{
content:"";
width:4px;
height:18px;
background:#2ecc71;
display:inline-block;
}

.grid{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
gap:12px;
}

label{font-size:14px;margin-bottom:4px;display:block}
input,select{
width:100%;
padding:10px;
border-radius:8px;
border:1px solid #ccc;
font-size:14px;
}

/* === Mitarbeiter === */
.employees{
display:flex;
gap:40px;
flex-wrap:wrap;
}
.emp{
display:flex;
align-items:center;
gap:8px;
}
.emp input{margin:0}

/* === Signature === */
.signature-box{
border:2px dashed #ccc;
border-radius:10px;
height:180px;
position:relative;
overflow:hidden;
}
canvas{
width:100%;
height:100%;
touch-action:none;
}
.signature-actions{
display:flex;
gap:10px;
margin-top:10px;
}
.btn{
flex:1;
padding:12px;
border:none;
border-radius:8px;
font-size:14px;
cursor:pointer;
}
.btn-green{background:#2ecc71;color:#fff}
.btn-red{background:#e74c3c;color:#fff}
.btn:disabled{opacity:.5;cursor:not-allowed}

/* === Watermark === */
.watermark{
position:absolute;
inset:0;
background:url("HJ_Clean.png") center/60% no-repeat;
opacity:.08;
pointer-events:none;
}

/* === PDF one page === */
@media print{
body{background:#fff}
.container{box-shadow:none}
.btn{display:none}
}
</style>
</head>

<body>
<div class="container">
<div class="watermark"></div>

<h1>LeistungsbestÃ¤tigung</h1>

<div class="section-title">Mitarbeiter</div>
<div class="employees">
<div class="emp">
<input type="checkbox" id="m1">
<label for="m1">HervÃ© Mbarga</label>
</div>
<div class="emp">
<input type="checkbox" id="m2">
<label for="m2">Jacky Massing</label>
</div>
</div>

<div class="section-title">Kunde</div>
<div class="grid">
<div><label>Vorname</label><input></div>
<div><label>Nachname</label><input></div>
<div><label>Telefon</label><input></div>
<div><label>Anschrift</label><input></div>
</div>

<div class="section-title">Datum & Zeit</div>
<div class="grid">
<div><label>Datum</label><input type="date"></div>
<div><label>Beginn â€“ Stunde</label><select id="bs"></select></div>
<div><label>Beginn â€“ Minute</label><select id="bm"></select></div>
<div><label>Ende â€“ Stunde</label><select id="es"></select></div>
<div><label>Ende â€“ Minute</label><select id="em"></select></div>
</div>

<div class="section-title">Unterschriften</div>
<label>Kunde</label>
<div class="signature-box">
<canvas id="sig"></canvas>
</div>

<div class="signature-actions">
<button id="confirm" class="btn btn-green">BestÃ¤tigen</button>
<button id="clear" class="btn btn-red">LÃ¶schen</button>
</div>

<br>
<button class="btn btn-green" onclick="window.print()">Als PDF speichern / drucken</button>
</div>

<script>
/* === Time selects === */
function fill(sel,max){
for(let i=0;i<=max;i++){
let o=document.createElement("option");
o.text=o.value=String(i).padStart(2,"0");
sel.add(o);
}
}
fill(bs,23);fill(es,23);fill(bm,59);fill(em,59);

/* === Signature logic === */
const c=document.getElementById("sig");
const ctx=c.getContext("2d");
let drawing=false,locked=false;

function resize(){
c.width=c.offsetWidth;
c.height=c.offsetHeight;
}
resize();window.addEventListener("resize",resize);

function pos(e){
const r=c.getBoundingClientRect();
return{
x:(e.touches?e.touches[0].clientX:e.clientX)-r.left,
y:(e.touches?e.touches[0].clientY:e.clientY)-r.top
}
}

c.addEventListener("pointerdown",e=>{
if(locked) return;
drawing=true;
let p=pos(e);
ctx.beginPath();
ctx.moveTo(p.x,p.y);
});
c.addEventListener("pointermove",e=>{
if(!drawing||locked) return;
let p=pos(e);
ctx.lineTo(p.x,p.y);
ctx.stroke();
});
window.addEventListener("pointerup",()=>drawing=false);

confirm.onclick=()=>{
locked=true;
clear.disabled=true; // ðŸ”’ suppression impossible aprÃ¨s validation
};

clear.onclick=()=>{
if(locked) return;
ctx.clearRect(0,0,c.width,c.height);
};
</script>
</body>
</html>
