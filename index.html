<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Leistungsbestätigung – HJ Cleaning</title>

<style>
body{
  font-family:"Segoe UI",Arial,sans-serif;
  background:linear-gradient(135deg,#eef2f3,#dfe9f3);
  margin:0;padding:20px
}
.container{
  max-width:950px;margin:auto;background:#fff;padding:30px;
  border-radius:14px;box-shadow:0 10px 25px rgba(0,0,0,.12)
}
.header{
  display:grid;
  grid-template-columns:auto 1fr;
  gap:20px;
  align-items:center;
  border-bottom:2px solid #e5e7eb;
  padding-bottom:15px;
  margin-bottom:25px
}
.logo{max-width:150px}
.company{font-size:14px;line-height:1.5}
h1{text-align:center;margin:20px 0;font-size:30px}
.meta{text-align:right;font-size:14px;color:#374151}

h3{
  margin-top:30px;
  color:#111827;
  border-left:4px solid #22c55e;
  padding-left:10px
}

.row{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:16px;
  margin-top:12px
}
@media(max-width:700px){
  .row{grid-template-columns:1fr}
  .header{grid-template-columns:1fr;text-align:center}
  .logo{margin:0 auto}
}

label{font-weight:600;color:#374151}
input,textarea{
  width:100%;
  padding:10px;
  border-radius:8px;
  border:1px solid #d1d5db;
  font-size:14px
}
textarea{min-height:100px}

.emp-list{
  display:flex;
  gap:20px;
  margin-top:10px;
  flex-wrap:wrap
}
.emp-item{
  display:flex;
  align-items:center;
  gap:8px;
  font-size:15px
}

.signatures{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:25px;
  margin-top:30px
}
@media(max-width:700px){.signatures{grid-template-columns:1fr}}

.signature-box{
  background:#f9fafb;
  padding:15px;
  border-radius:12px;
  border:1px solid #e5e7eb
}
canvas{
  width:100%;
  height:160px;
  border:2px dashed #9ca3af;
  border-radius:10px;
  background:#fff;
  touch-action:none
}

.sig-info{font-size:13px;margin-top:6px;color:#374151}
.sig-actions{display:flex;gap:8px;margin-top:10px}

button{
  padding:12px 16px;
  font-size:15px;
  border:none;
  border-radius:10px;
  cursor:pointer;
  color:#fff
}
.btn-confirm{background:#22c55e}
.btn-delete{background:#ef4444}
.btn-print{background:#2563eb;width:100%;font-size:17px}
button:disabled{background:#9ca3af;cursor:not-allowed}

.actions{text-align:center;margin-top:40px}

@media print{
  body{background:#fff;padding:0}
  .container{box-shadow:none;border-radius:0}
  button,.sig-actions,.actions{display:none}
  canvas{border:1px solid #000}
}
</style>
</head>

<body>
<div class="container">

<div class="header">
  <img src="HJ_Clean.png" class="logo">
  <div class="company">
    <strong>Cleaning</strong> – Marke von HJ Corporate GbR<br>
    Stauseestraße 27b, 54317 Riveris<br>
    Tel. +49 176 87898900 · info@hjcorporate.de
  </div>
</div>

<h1>Leistungsbestätigung</h1>
<div class="meta">Dokument-Nr.: <strong id="docNr"></strong></div>

<h3>Mitarbeiter</h3>
<div class="emp-list">
  <label class="emp-item">
    <input type="checkbox" value="Hervé Mbarga" class="emp"> Hervé Mbarga
  </label>
  <label class="emp-item">
    <input type="checkbox" value="Jacky Massing" class="emp"> Jacky Massing
  </label>
</div>

<h3>Kundendaten</h3>
<div class="row">
  <input placeholder="Vorname">
  <input placeholder="Nachname">
  <input placeholder="Telefon">
  <input placeholder="Anschrift">
</div>

<h3>Leistungsdetails</h3>
<div class="row">
  <input type="date">
  <input type="time">
  <input type="time">
</div>
<textarea placeholder="Beschreibung der ausgeführten Arbeiten"></textarea>

<h3>Unterschriften</h3>
<div class="signatures">

<div class="signature-box">
  <strong>Kunde</strong>
  <canvas id="sigKunde"></canvas>
  <div class="sig-info" id="kundeInfo"></div>
  <div class="sig-actions">
    <button class="btn-confirm" id="kConfirm">Bestätigen</button>
    <button class="btn-delete" id="kClear">Löschen</button>
  </div>
</div>

<div class="signature-box">
  <strong>Mitarbeiter</strong>
  <div class="sig-info" id="empNames"></div>
  <canvas id="sigMit"></canvas>
  <div class="sig-info" id="mitInfo"></div>
  <div class="sig-actions">
    <button class="btn-confirm" id="mConfirm">Bestätigen</button>
    <button class="btn-delete" id="mClear">Löschen</button>
  </div>
</div>

</div>

<div class="actions">
  <button class="btn-print" onclick="window.print()">Als PDF speichern / drucken</button>
</div>

</div>

<script>
const now=new Date();
docNr.innerText="LB-"+now.toISOString().slice(0,10)+"-"+Math.floor(Math.random()*1000);

function sign(canvas){
  const ctx=canvas.getContext("2d");
  let d=false;
  canvas.addEventListener("pointerdown",()=>d=true);
  canvas.addEventListener("pointerup",()=>{d=false;ctx.beginPath()});
  canvas.addEventListener("pointermove",e=>{
    if(!d)return;
    const r=canvas.getBoundingClientRect();
    ctx.lineWidth=2;
    ctx.lineCap="round";
    ctx.lineTo(e.clientX-r.left,e.clientY-r.top);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(e.clientX-r.left,e.clientY-r.top);
  });
}

sign(sigKunde); 
sign(sigMit);

kConfirm.onclick=()=>{
  sigKunde.style.pointerEvents="none";
  kundeInfo.innerText="Elektronisch signiert am "+new Date().toLocaleString();
  kConfirm.disabled=kClear.disabled=true;
};

mConfirm.onclick=()=>{
  const emps=[...document.querySelectorAll(".emp:checked")].map(e=>e.value);
  if(!emps.length){alert("Bitte mindestens einen Mitarbeiter auswählen");return;}
  empNames.innerText=emps.join(" & ");
  sigMit.style.pointerEvents="none";
  mitInfo.innerText="Elektronisch signiert von "+emps.join(" & ")+" am "+new Date().toLocaleString();
  mConfirm.disabled=mClear.disabled=true;
};
</script>
</body>
</html>
