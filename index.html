<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>Leistungsbestätigung – HJ Cleaning</title>

<style>
*{box-sizing:border-box}

body{
  margin:0;
  font-family:system-ui,Arial;
  background:#f1f5f9;
}

/* Watermark */
.watermark{
  position:fixed;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  z-index:0;
  pointer-events:none;
  opacity:0.07;
}
.watermark img{
  width:80vw;
  max-width:700px;
  filter:grayscale(100%);
}

.app{
  position:relative;
  z-index:1;
  max-width:900px;
  width:100%;
  margin:auto;
  background:#fff;
  padding:16px;
  border-radius:18px;
  box-shadow:0 15px 30px rgba(0,0,0,.1)
}

.header{
  display:flex;
  gap:15px;
  align-items:center;
  flex-wrap:wrap;
}
.logo{height:70px;max-width:40vw;object-fit:contain}
.company{font-size:14px;line-height:1.4;flex:1}

h1{margin:15px 0 5px;font-size:28px}
.nr{font-weight:600;margin-bottom:20px}

.section{margin-top:25px}
.section h2{font-size:18px;border-left:4px solid #22c55e;padding-left:10px;margin-bottom:15px}

.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:12px;
}
@media(max-width:600px){
  .grid{grid-template-columns:1fr}
}

/* Floating labels */
.field{position:relative}
.field input,.field textarea{
  width:100%;
  padding:14px 10px 8px;
  border-radius:10px;
  border:1px solid #cbd5e1;
  font-size:16px;
  background:#fff;
}
.field label{
  position:absolute;
  left:12px;
  top:12px;
  color:#6b7280;
  font-size:14px;
  transition:.2s;
  pointer-events:none;
  background:#fff;
  padding:0 4px;
}
.field input:focus+label,
.field input:not(:placeholder-shown)+label,
.field textarea:focus+label,
.field textarea:not(:placeholder-shown)+label{
  top:-8px;
  font-size:12px;
  color:#22c55e;
}

/* Signatures */
.signature{
  border:2px dashed #cbd5e1;
  border-radius:12px;
  height:160px;
  touch-action:none;
  background:#fff;
}
.sigbox{
  background:#f8fafc;
  padding:10px;
  border-radius:12px;
}
.sig-actions{
  display:flex;
  gap:8px;
  margin-top:8px;
}

button{
  padding:12px 14px;
  border:none;
  border-radius:10px;
  color:#fff;
  font-size:16px;
  cursor:pointer;
}
.ok{background:#22c55e}
.del{background:#ef4444}
.print{background:#2563eb;width:100%;margin-top:20px;font-size:18px}

@media print{
  button,.sig-actions{display:none}
  body{background:#fff}
}
</style>
</head>

<body>

<!-- Watermark -->
<div class="watermark">
  <img src="HJ_Clean.png">
</div>

<div class="app">

<div class="header">
<img src="HJ_Clean.png" class="logo">
<div class="company">
Cleaning – Marke von HJ Corporate GbR<br>
Stauseestraße 27b, 54317 Riveris<br>
Tel. +49 176 87898900 · info@hjcorporate.de
</div>
</div>

<h1>Leistungsbestätigung</h1>
<div class="nr">Nr: <span id="nr"></span></div>

<div class="section">
<h2>Mitarbeiter</h2>
<label><input type="checkbox" value="Hervé Mbarga" class="emp"> Hervé Mbarga</label><br>
<label><input type="checkbox" value="Jacky Massing" class="emp"> Jacky Massing</label>
</div>

<div class="section">
<h2>Kunde</h2>
<div class="grid">
<div class="field"><input id="vorname" placeholder=" "><label>Vorname</label></div>
<div class="field"><input id="nachname" placeholder=" "><label>Nachname</label></div>
<div class="field"><input id="telefon" placeholder=" "><label>Telefon</label></div>
<div class="field"><input id="adresse" placeholder=" "><label>Anschrift</label></div>
</div>
</div>

<div class="section">
<h2>Datum & Zeit</h2>
<div class="grid">
<div class="field"><input type="date" id="date" placeholder=" "><label>Datum</label></div>
<div class="field"><input type="time" id="start" placeholder=" "><label>Start</label></div>
<div class="field"><input type="time" id="end" placeholder=" "><label>Ende</label></div>
</div>
</div>

<div class="section">
<h2>Berechnung</h2>
<div class="grid">
<div class="field"><input id="hours" readonly placeholder=" "><label>Arbeitsstunden</label></div>
<div class="field"><input id="rate" placeholder=" "><label>€ / Stunde</label></div>
<div class="field"><input id="km" placeholder=" "><label>Kilometer</label></div>
<div class="field"><input id="kmrate" placeholder=" "><label>€ / KM</label></div>
<div class="field"><input id="travel" readonly placeholder=" "><label>Anfahrtkosten €</label></div>
<div class="field"><input id="total" readonly placeholder=" "><label>Gesamtbetrag €</label></div>
</div>
</div>

<div class="section">
<h2>Unterschriften</h2>
<div class="grid">
<div class="sigbox">
<strong>Kunde</strong>
<canvas id="sig1" class="signature"></canvas>
<div class="sig-actions">
<button class="ok" id="cConfirm">Bestätigen</button>
<button class="del" id="cClear">Löschen</button>
</div>
</div>

<div class="sigbox">
<strong>Mitarbeiter</strong>
<canvas id="sig2" class="signature"></canvas>
<div class="sig-actions">
<button class="ok" id="mConfirm">Bestätigen</button>
<button class="del" id="mClear">Löschen</button>
</div>
</div>
</div>

<button class="print" onclick="window.print()">Als PDF speichern / drucken</button>

</div>

<script>
nr.innerText="LB-"+Date.now();

// Calculations
function calc(){
  if(start.value && end.value){
    let s=new Date("1970-01-01T"+start.value);
    let e=new Date("1970-01-01T"+end.value);
    let h=(e-s)/3600000;
    hours.value=h>0?h.toFixed(2):"";
  }
  let kmv=+km.value||0;
  let kr=+kmrate.value||0;
  travel.value=(kmv*kr).toFixed(2);
  let r=+rate.value||0;
  let h2=+hours.value||0;
  total.value=(h2*r+kmv*kr).toFixed(2);
}
["start","end","rate","km","kmrate"].forEach(i=>document.getElementById(i).addEventListener("input",calc));

// Signatures
function setup(c){
  const ctx=c.getContext("2d");let d=false;
  c.onpointerdown=()=>d=true;
  c.onpointerup=()=>{d=false;ctx.beginPath()};
  c.onpointermove=e=>{
    if(!d)return;
    let r=c.getBoundingClientRect();
    ctx.lineWidth=2;
    ctx.lineTo(e.clientX-r.left,e.clientY-r.top);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(e.clientX-r.left,e.clientY-r.top);
  };
}
setup(sig1);setup(sig2);

// Kunde
cConfirm.onclick=()=>{sig1.style.pointerEvents="none";cConfirm.disabled=true;cClear.disabled=true;}
cClear.onclick=()=>{sig1.getContext("2d").clearRect(0,0,sig1.width,sig1.height);}

// Mitarbeiter
mConfirm.onclick=()=>{
  let emps=[...document.querySelectorAll(".emp:checked")].map(e=>e.value);
  if(!emps.length){alert("Bitte Mitarbeiter auswählen");return;}
  sig2.style.pointerEvents="none";mConfirm.disabled=true;mClear.disabled=true;
}
mClear.onclick=()=>{sig2.getContext("2d").clearRect(0,0,sig2.width,sig2.height);}
</script>

</body>
</html>
