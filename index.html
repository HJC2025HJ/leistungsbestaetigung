<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Leistungsbest√§tigung</title>

<style>
:root{
--green:#2ecc71;
--red:#e74c3c;
--border:#dcdcdc;
}

*{box-sizing:border-box}

body{
margin:0;
padding:16px;
font-family:Arial, Helvetica, sans-serif;
background:#f2f4f7;
}

.container{
max-width:1200px;
margin:auto;
background:#fff;
padding:20px;
border-radius:12px;
position:relative;
overflow:hidden;
}

/* ===== WATERMARK ===== */
.watermark{
position:absolute;
inset:0;
background:url("HJ_Clean.png") center/60% no-repeat;
opacity:0.08;
pointer-events:none; /* IMPORTANT */
z-index:0;
}

/* ===== CONTENT ===== */
.content{
position:relative;
z-index:1;
}

h1{
text-align:center;
margin:10px 0 20px;
}

.section{
margin-bottom:20px;
}

.section-title{
font-weight:bold;
margin-bottom:8px;
border-left:4px solid var(--green);
padding-left:8px;
}

/* ===== GRID ===== */
.grid{
display:grid;
grid-template-columns:repeat(4,1fr);
gap:12px;
}

@media(max-width:900px){
.grid{grid-template-columns:repeat(2,1fr)}
}

@media(max-width:500px){
.grid{grid-template-columns:1fr}
}

label{
font-size:13px;
margin-bottom:4px;
display:block;
}

input, select{
width:100%;
padding:10px;
border:1px solid var(--border);
border-radius:8px;
font-size:14px;
}

/* ===== EMPLOYEES ===== */
.employees{
display:flex;
gap:30px;
flex-wrap:wrap;
}

.emp{
display:flex;
align-items:center;
gap:8px;
}

/* ===== SIGNATURES ===== */
.signatures{
display:grid;
grid-template-columns:1fr 1fr;
gap:20px;
}

@media(max-width:700px){
.signatures{grid-template-columns:1fr}
}

.sig-box{
border:1px dashed #bbb;
border-radius:10px;
padding:10px;
}

canvas{
width:100%;
height:150px;
border:1px solid #ccc;
border-radius:8px;
background:#fff;
touch-action:none;
}

.sig-actions{
display:flex;
gap:10px;
margin-top:10px;
}

button{
flex:1;
padding:10px;
border:none;
border-radius:8px;
color:#fff;
font-size:14px;
cursor:pointer;
}

.confirm{background:var(--green)}
.delete{background:var(--red)}
button:disabled{opacity:0.5;cursor:not-allowed}

/* ===== PDF ===== */
.print{
margin-top:20px;
width:100%;
background:#3498db;
}

@media print{
body{background:#fff;padding:0}
.container{
box-shadow:none;
border-radius:0;
max-width:100%;
page-break-inside:avoid;
}
button{display:none}
@page{size:A4;margin:10mm}
}
</style>
</head>

<body>
<div class="container">
<div class="watermark"></div>

<div class="content">

<h1>Leistungsbest√§tigung</h1>

<!-- Mitarbeiter -->
<div class="section">
<div class="section-title">Mitarbeiter</div>
<div class="employees">
<label class="emp"><input type="checkbox" class="empCheck"> Herv√© Mbarga</label>
<label class="emp"><input type="checkbox" class="empCheck"> Jacky Massing</label>
</div>
</div>

<!-- Kunde -->
<div class="section">
<div class="section-title">Kunde</div>
<div class="grid">
<div><label>Vorname</label><input></div>
<div><label>Nachname</label><input></div>
<div><label>Telefon</label><input></div>
<div><label>Anschrift</label><input></div>
</div>
</div>

<!-- Datum & Zeit -->
<div class="section">
<div class="section-title">Datum & Zeit</div>
<div class="grid">
<div><label>Datum</label><input type="date"></div>
<div><label>Beginn ‚Äì Stunde</label><select id="bs"></select></div>
<div><label>Beginn ‚Äì Minute</label><select id="bm"></select></div>
<div><label>Ende ‚Äì Stunde</label><select id="es"></select></div>
<div><label>Ende ‚Äì Minute</label><select id="em"></select></div>
</div>
</div>

<!-- Unterschriften -->
<div class="section">
<div class="section-title">Unterschriften</div>

<div class="signatures">

<div class="sig-box">
<strong>Kunde</strong>
<canvas id="sigK"></canvas>
<div class="sig-actions">
<button class="confirm" id="kc">Best√§tigen</button>
<button class="delete" id="kd">L√∂schen</button>
</div>
</div>

<div class="sig-box">
<strong>Mitarbeiter</strong>
<canvas id="sigM"></canvas>
<div class="sig-actions">
<button class="confirm" id="mc">Best√§tigen</button>
<button class="delete" id="md">L√∂schen</button>
</div>
</div>

</div>
</div>

<button class="print" onclick="window.print()">Als PDF speichern / drucken</button>

</div>
</div>

<script>
/* ===== HOURS ===== */
function fill(sel,max){
for(let i=0;i<=max;i++){
let o=document.createElement("option");
o.text=o.value=String(i).padStart(2,"0");
sel.add(o);
}
}
fill(bs,23); fill(es,23); fill(bm,59); fill(em,59);

/* ===== SIGNATURE ===== */
function signature(canvas, confirmBtn, deleteBtn){
const ctx=canvas.getContext("2d");
let draw=false, locked=false;

canvas.addEventListener("pointerdown",e=>{
if(locked) return;
draw=true;
ctx.beginPath();
ctx.moveTo(e.offsetX,e.offsetY);
});

canvas.addEventListener("pointermove",e=>{
if(!draw||locked) return;
ctx.lineTo(e.offsetX,e.offsetY);
ctx.stroke();
});

canvas.addEventListener("pointerup",()=>draw=false);

confirmBtn.onclick=()=>{
locked=true;
canvas.style.pointerEvents="none";
confirmBtn.disabled=true;
deleteBtn.disabled=true; // üîí IMPOSSIBLE √Ä SUPPRIMER
};

deleteBtn.onclick=()=>{
if(locked) return;
ctx.clearRect(0,0,canvas.width,canvas.height);
};
}

signature(sigK,kc,kd);
signature(sigM,mc,md);
</script>

</body>
</html>
