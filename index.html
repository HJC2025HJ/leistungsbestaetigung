<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Leistungsbestätigung – HJ Cleaning</title>

<style>
:root{
--green:#22c55e;
--border:#d1d5db;
--bg:#f3f4f6;
}

body{
margin:0;
font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial;
background:linear-gradient(135deg,#eef2f3,#e5ecf4);
}

.wrapper{
max-width:1100px;
margin:auto;
padding:15px;
}

.form{
background:white;
border-radius:14px;
padding:25px;
box-shadow:0 10px 25px rgba(0,0,0,.1);
position:relative;
overflow:hidden;
}

/* Filigrane */
.watermark{
position:absolute;
inset:0;
background:url("HJ_Clean.png") center center no-repeat;
background-size:60%;
opacity:.18;
pointer-events:none;
z-index:0;
}

.form-content{
position:relative;
z-index:2;
}

.header{
display:flex;
gap:20px;
align-items:center;
border-bottom:2px solid #e5e7eb;
padding-bottom:15px;
margin-bottom:20px;
}
.header img{height:60px}
.header .company{font-size:14px;line-height:1.4}

h1{text-align:center;margin:10px 0}
.section{margin-top:25px}
.section-title{
font-weight:700;
margin-bottom:10px;
padding-left:10px;
border-left:4px solid var(--green);
}

/* Grilles */
.grid{
display:grid;
gap:15px;
}
.grid-2{grid-template-columns:repeat(2,1fr)}
.grid-3{grid-template-columns:repeat(3,1fr)}
.grid-4{grid-template-columns:repeat(4,1fr)}

@media(max-width:800px){
.grid-4{grid-template-columns:repeat(2,1fr)}
.grid-3{grid-template-columns:1fr}
}

/* Floating labels */
.field{
position:relative;
}
.field input,.field select{
width:100%;
padding:14px 10px 10px;
border:1px solid var(--border);
border-radius:10px;
background:#fff;
font-size:16px;
}
.field label{
position:absolute;
top:12px;
left:10px;
font-size:14px;
color:#6b7280;
pointer-events:none;
transition:.2s;
background:white;
padding:0 5px;
}
.field input:focus + label,
.field input:not(:placeholder-shown)+label,
.field select:focus + label,
.field select:not([value=""])+label{
top:-7px;
font-size:12px;
color:var(--green);
}

/* Checkboxes */
.emp-list label{
display:flex;
align-items:center;
gap:10px;
margin-bottom:8px;
}

/* Signatures */
.signatures{
display:grid;
grid-template-columns:1fr 1fr;
gap:20px;
}
@media(max-width:700px){.signatures{grid-template-columns:1fr}}

.sig-box{
background:#f9fafb;
padding:15px;
border-radius:12px;
border:1px solid #e5e7eb;
}
canvas{
width:100%;
height:160px;
border:2px dashed #9ca3af;
border-radius:10px;
background:white;
touch-action:none;
}
.sig-actions{display:flex;gap:10px;margin-top:10px}
.sig-actions button{
flex:1;
padding:10px;
border:none;
border-radius:8px;
color:white;
}
.confirm{background:#22c55e}
.clear{background:#ef4444}

/* Print */
@media print{
body{background:white}
.wrapper{padding:0}
.form{box-shadow:none}
button{display:none}
}
</style>
</head>

<body>
<div class="wrapper">
<div class="form">
<div class="watermark"></div>
<div class="form-content">

<div class="header">
<img src="HJ_Clean.png">
<div class="company">
<strong>Cleaning – Marke von HJ Corporate GbR</strong><br>
Stauseestraße 27b · 54317 Riveris<br>
Tel. +49 176 87898900 · info@hjcorporate.de
</div>
</div>

<h1>Leistungsbestätigung</h1>
<div>Nr: <strong id="docNr"></strong></div>

<!-- Mitarbeiter -->
<div class="section">
<div class="section-title">Mitarbeiter</div>
<div class="emp-list">
<label><input type="checkbox" class="emp" value="Hervé Mbarga"> Hervé Mbarga</label>
<label><input type="checkbox" class="emp" value="Jacky Massing"> Jacky Massing</label>
</div>
</div>

<!-- Kunde -->
<div class="section">
<div class="section-title">Kunde</div>
<div class="grid grid-4">
<div class="field"><input placeholder=" " id="vorname"><label>Vorname</label></div>
<div class="field"><input placeholder=" " id="nachname"><label>Nachname</label></div>
<div class="field"><input placeholder=" " id="telefon"><label>Telefon</label></div>
<div class="field"><input placeholder=" " id="anschrift"><label>Anschrift</label></div>
</div>
</div>

<!-- Datum & Zeit -->
<div class="section">
<div class="section-title">Datum & Zeit</div>
<div class="grid grid-3">
<div class="field"><input type="date" id="datum"><label>Datum</label></div>
<div>
<strong>Beginn</strong>
<div class="grid grid-2">
<select id="startH"></select>
<select id="startM"></select>
</div>
</div>
<div>
<strong>Ende</strong>
<div class="grid grid-2">
<select id="endH"></select>
<select id="endM"></select>
</div>
</div>
</div>
</div>

<!-- Berechnung -->
<div class="section">
<div class="section-title">Berechnung</div>
<div class="grid grid-4">
<div class="field"><input id="anz" readonly placeholder=" "><label>Anzahl Mitarbeiter</label></div>
<div class="field"><input id="stunden" readonly placeholder=" "><label>Arbeitsstunden</label></div>
<div class="field"><input id="preis" placeholder=" "><label>€/Stunde</label></div>
<div class="field"><input id="km" placeholder=" "><label>Kilometer</label></div>
<div class="field"><input id="kmPreis" placeholder=" "><label>€/KM</label></div>
<div class="field"><input id="anfahrt" readonly placeholder=" "><label>Anfahrtkosten €</label></div>
<div class="field"><input id="gesamt" readonly placeholder=" "><label>Gesamtbetrag €</label></div>
</div>
</div>

<!-- Signatures -->
<div class="section">
<div class="section-title">Unterschriften</div>
<div class="signatures">
<div class="sig-box">
<strong>Kunde</strong>
<canvas id="sigK"></canvas>
<div class="sig-actions">
<button class="confirm" onclick="lock(sigK)">Bestätigen</button>
<button class="clear" onclick="clearSig(sigK)">Löschen</button>
</div>
</div>
<div class="sig-box">
<strong>Mitarbeiter</strong>
<canvas id="sigM"></canvas>
<div class="sig-actions">
<button class="confirm" onclick="lock(sigM)">Bestätigen</button>
<button class="clear" onclick="clearSig(sigM)">Löschen</button>
</div>
</div>
</div>
</div>

<button onclick="window.print()" style="margin-top:30px;width:100%;padding:15px;background:#2563eb;color:white;border:none;border-radius:12px;font-size:18px">
Als PDF speichern / drucken
</button>

</div>
</div>
</div>

<script>
docNr.innerText="LB-"+Date.now();

for(let i=0;i<24;i++){
startH.add(new Option(String(i).padStart(2,"0"),i));
endH.add(new Option(String(i).padStart(2,"0"),i));
}
for(let i=0;i<60;i++){
startM.add(new Option(String(i).padStart(2,"0"),i));
endM.add(new Option(String(i).padStart(2,"0"),i));
}

function calc(){
let s = startH.value*60 + Number(startM.value);
let e = endH.value*60 + Number(endM.value);
let mins = Math.max(0,e-s);
let emp = document.querySelectorAll(".emp:checked").length;
anz.value=emp;
let hours = (mins/60)*emp;
stunden.value=hours.toFixed(2);

let total = hours*(preis.value||0) + (km.value||0)*(kmPreis.value||0);
anfahrt.value=((km.value||0)*(kmPreis.value||0)).toFixed(2);
gesamt.value=total.toFixed(2);
}
document.querySelectorAll("input,select").forEach(e=>e.oninput=calc);

function enable(c){
let ctx=c.getContext("2d"),draw=false;
c.addEventListener("pointerdown",()=>draw=true);
c.addEventListener("pointerup",()=>{draw=false;ctx.beginPath()});
c.addEventListener("pointermove",e=>{
if(!draw)return;
let r=c.getBoundingClientRect();
ctx.lineWidth=2;
ctx.lineTo(e.clientX-r.left,e.clientY-r.top);
ctx.stroke();
ctx.beginPath();
ctx.moveTo(e.clientX-r.left,e.clientY-r.top);
});
}
enable(sigK);enable(sigM);

function lock(c){c.style.pointerEvents="none";}
function clearSig(c){
let ctx=c.getContext("2d");
ctx.clearRect(0,0,c.width,c.height);
c.style.pointerEvents="auto";
}
</script>
</body>
</html>
