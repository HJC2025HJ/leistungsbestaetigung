<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Leistungsbestätigung – HJ Cleaning</title>

<style>
:root{
  --green:#22c55e;
  --border:#d1d5db;
}
body{
  margin:0;
  font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;
  background:#eef2f3;
}
.app{
  max-width:1100px;
  margin:auto;
  padding:20px;
  position:relative;
}
.form{
  background:#fff;
  padding:25px;
  border-radius:16px;
  box-shadow:0 10px 30px rgba(0,0,0,.15);
  position:relative;
  z-index:2;
}
.watermark{
  position:absolute;
  inset:0;
  display:flex;
  justify-content:center;
  align-items:center;
  z-index:1;
  pointer-events:none;
}
.watermark img{
  width:70%;
  opacity:.22;
  filter:grayscale(100%) contrast(120%);
}

.header{
  display:flex;
  gap:20px;
  align-items:center;
  border-bottom:2px solid #e5e7eb;
  padding-bottom:15px;
}
.logo{height:80px}

h1{margin:20px 0 10px}
.section{margin-top:30px}
.section h3{
  border-left:5px solid var(--green);
  padding-left:10px;
}

.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(240px,1fr));
  gap:16px;
  margin-top:10px;
}
label{font-weight:600}
input,select{
  width:100%;
  padding:10px;
  border-radius:10px;
  border:1px solid var(--border);
  font-size:15px;
}

.hours{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:6px;
}

.signatures{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:20px;
}
@media(max-width:700px){
  .signatures{grid-template-columns:1fr}
}

canvas{
  width:100%;
  height:160px;
  border:2px dashed #aaa;
  border-radius:12px;
  background:#fff;
}

.sig-actions{
  display:flex;
  gap:10px;
  margin-top:10px;
}
button{
  padding:12px 16px;
  border:none;
  border-radius:12px;
  color:#fff;
  font-size:15px;
}
.green{background:#22c55e}
.red{background:#ef4444}
.blue{background:#2563eb;width:100%;font-size:18px}

@media print{
  button,.sig-actions{display:none}
  body{background:#fff}
  .form{box-shadow:none}
}
</style>
</head>

<body>
<div class="app">

<div class="watermark">
  <img src="HJ_Clean.png">
</div>

<div class="form">

<div class="header">
  <img src="HJ_Clean.png" class="logo">
  <div>
    <b>Cleaning – Marke von HJ Corporate GbR</b><br>
    Stauseestraße 27b, 54317 Riveris<br>
    Tel. +49 176 87898900 · info@hjcorporate.de
  </div>
</div>

<h1>Leistungsbestätigung</h1>
<div>Nr: <b id="doc"></b></div>

<!-- Mitarbeiter -->
<div class="section">
<h3>Mitarbeiter</h3>
<label><input type="checkbox" class="emp" value="Hervé Mbarga"> Hervé Mbarga</label>
<label><input type="checkbox" class="emp" value="Jacky Massing"> Jacky Massing</label>
</div>

<!-- Kunde -->
<div class="section">
<h3>Kunde</h3>
<div class="grid">
<input placeholder="Vorname">
<input placeholder="Nachname">
<input placeholder="Telefon">
<input placeholder="Anschrift">
</div>
</div>

<!-- Zeit -->
<div class="section">
<h3>Datum & Zeit</h3>
<div class="grid">
<input type="date" id="date">
<div class="hours">
<select id="sh"></select><select id="sm"></select>
</div>
<div class="hours">
<select id="eh"></select><select id="em"></select>
</div>
</div>
</div>

<!-- Berechnung -->
<div class="section">
<h3>Berechnung</h3>
<div class="grid">
<input id="count" readonly placeholder="Anzahl Mitarbeiter">
<input id="hours" readonly placeholder="Arbeitsstunden">
<input id="rate" placeholder="€/Stunde">
<input id="km" placeholder="KM">
<input id="kmrate" placeholder="€/KM">
<input id="travel" readonly placeholder="Anfahrtkosten €">
<input id="total" readonly placeholder="Gesamtbetrag €">
</div>
</div>

<!-- Signatures -->
<div class="section">
<h3>Unterschriften</h3>
<div class="signatures">
<div>
<b>Kunde</b>
<canvas id="c1"></canvas>
<div class="sig-actions">
<button class="green" onclick="lock(c1)">Bestätigen</button>
<button class="red" onclick="clearC(c1)">Löschen</button>
</div>
</div>

<div>
<b>Mitarbeiter</b>
<canvas id="c2"></canvas>
<div class="sig-actions">
<button class="green" onclick="lock(c2)">Bestätigen</button>
<button class="red" onclick="clearC(c2)">Löschen</button>
</div>
</div>
</div>
</div>

<button class="blue" onclick="window.print()">Als PDF speichern / drucken</button>

</div>
</div>

<script>
document.getElementById("doc").innerText="LB-"+Date.now();

// populate time
for(let i=0;i<24;i++){
  sh.add(new Option(String(i).padStart(2,"0"),i));
  eh.add(new Option(String(i).padStart(2,"0"),i));
}
for(let i=0;i<60;i++){
  sm.add(new Option(String(i).padStart(2,"0"),i));
  em.add(new Option(String(i).padStart(2,"0"),i));
}

function calc(){
  const s = sh.value*60+Number(sm.value);
  const e = eh.value*60+Number(em.value);
  let diff=(e-s)/60; if(diff<0) diff=0;
  const emp=document.querySelectorAll(".emp:checked").length;
  count.value=emp;
  const hoursTot=diff*emp;
  hours.value=hoursTot.toFixed(2);
  const travel=km.value*kmrate.value||0;
  travel.value=travel.toFixed(2);
  total.value=((hoursTot*rate.value||0)+travel).toFixed(2);
}

document.querySelectorAll("select,input").forEach(x=>x.oninput=calc);

function enable(c){
  const ctx=c.getContext("2d");let d=false;
  c.onpointerdown=()=>d=true;
  c.onpointerup=()=>{d=false;ctx.beginPath()}
  c.onpointermove=e=>{
    if(!d)return;
    const r=c.getBoundingClientRect();
    ctx.lineWidth=2;
    ctx.lineTo(e.clientX-r.left,e.clientY-r.top);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(e.clientX-r.left,e.clientY-r.top);
  }
}
enable(c1); enable(c2);

function clearC(c){c.getContext("2d").clearRect(0,0,c.width,c.height);}
function lock(c){c.style.pointerEvents="none";}
</script>

</body>
</html>
